define("4763f06","ui/composer/press-composer",{dependencies:["montage","ui/composer/composer","core/event/mutable-event"],factory:function(a,b,c){var d=a("montage").Montage,e=a("ui/composer/composer").Composer,f=a("core/event/mutable-event").MutableEvent,g=b.PressComposer=d.create(e,{load:{value:function(){window.Touch?this._element.addEventListener("touchstart",this,!0):this._element.addEventListener("mousedown",this,!0)}},unload:{value:function(){window.Touch?this._element.removeEventListener("touchstart",this):this._element.removeEventListener("mousedown",this)}},delegate:{value:null},cancelPress:{value:function(){return this._state===g.PRESSED?(this._dispatchPressCancel(),this._endInteraction(),!0):!1}},addEventListener:{value:function(a,b,c){e.addEventListener.call(this,a,b,c),a==="longPress"&&(this._shouldDispatchLongPress=!0)}},UNPRESSED:{value:0},PRESSED:{value:1},CANCELLED:{value:2},_state:{enumerable:!1,value:0},state:{get:function(){return this._state}},_shouldDispatchLongPress:{enumerable:!1,value:!1},_longPressThreshold:{enumerable:!1,value:1e3},longPressThreshold:{get:function(){return this._longPressThreshold},set:function(a){this._longPressThreshold!==a&&(this._longPressThreshold=a)}},_longPressTimeout:{enumberable:!1,value:null},_observedPointer:{enumerable:!1,value:null},_startInteraction:{enumerable:!1,value:function(a){if("disabled"in this.component&&this.component.disabled||this._observedPointer!==null)return!1;var b=0,c;if(a.type==="touchstart"){c=a.changedTouches.length;for(;b<c;b++)if(!this.component.eventManager.componentClaimingPointer(a.changedTouches[b].identifier)){this._observedPointer=a.changedTouches[b].identifier;break}if(this._observedPointer===null)return!1;document.addEventListener("touchend",this,!1),document.addEventListener("touchcancel",this,!1)}else a.type==="mousedown"&&(this._observedPointer="mouse",document.addEventListener("mouseup",this,!1),document.addEventListener("click",this,!1));this.component.eventManager.claimPointer(this._observedPointer,this),this._dispatchPressStart(a)}},_interpretInteraction:{value:function(a){var b,c,d;if(this._observedPointer===null){this._endInteraction(a);return}b=!this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this),c=a.target;while(c!==this._element&&c&&c.parentNode)c=c.parentNode;d=c===this._element;if(b&&a.type==="click"){a.preventDefault(),this._endInteraction(a);return}if(a.type==="mouseup"){if(!b&&d){this._dispatchPress(a),this._endInteraction(a);return}if(!b&&!d){this._dispatchPressCancel(a),this._endInteraction(a);return}b&&!d&&this._endInteraction(a)}}},_endInteraction:{value:function(a){if(!a||a.type==="touchend"||a.type==="touchcancel")document.removeEventListener("touchend",this),document.removeEventListener("touchcancel",this);else if(!a||a.type==="click"||a.type==="mouseup")document.removeEventListener("click",this),document.removeEventListener("mouseup",this);this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.component.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._state=g.UNPRESSED}},_changedTouchisObserved:{value:function(a){if(this._observedPointer===null)return!1;var b=0,c=event.changedTouches.length;for(;b<c;b++)if(event.changedTouches[b].identifier===this._observedPointer)return b;return!1}},surrenderPointer:{value:function(a,b){var c=this.callDelegateMethod("surrenderPointer",a,b);return typeof c!="undefined"&&c===!1?!1:(this._dispatchPressCancel(),!0)}},captureTouchstart:{value:function(a){this._startInteraction(a)}},handleTouchend:{value:function(a){if(this._observedPointer===null){this._endInteraction(a);return}this._changedTouchisObserved(a.changedTouches)!==!1&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?this._dispatchPress(a):a.preventDefault(),this._endInteraction(a))}},handleTouchcancel:{value:function(a){if(this._observedPointer===null||this._changedTouchisObserved(a.changedTouches)!==!1)this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this._dispatchPressCancel(a),this._endInteraction(a)}},captureMousedown:{value:function(a){this._startInteraction(a)}},handleClick:{value:function(a){this._interpretInteraction(a)}},handleMouseup:{value:function(a){this._interpretInteraction(a)}},_createPressEvent:{enumerable:!1,value:function(a,b){var c,d,e;return b||(b=document.createEvent("CustomEvent"),b.initCustomEvent(a,!0,!0,null)),c=h.create(),c.event=b,c.type=a,c.pointer=this._observedPointer,b.changedTouches&&(e=this._changedTouchisObserved(b.changedTouches))!==!1&&(c.touch=b.changedTouches[e]),c}},_dispatchPressStart:{enumerable:!1,value:function(a){this._state=g.PRESSED,this.dispatchEvent(this._createPressEvent("pressStart",a));if(this._shouldDispatchLongPress){var b=this;this._longPressTimeout=setTimeout(function(){b._dispatchLongPress()},this._longPressThreshold)}}},_dispatchPress:{enumerable:!1,value:function(a){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this.dispatchEvent(this._createPressEvent("press",a)),this._state=g.UNPRESSED}},_dispatchLongPress:{enumerable:!1,value:function(a){this._shouldDispatchLongPress&&(this.dispatchEvent(this._createPressEvent("longPress",a)),this._longPressTimeout=null)}},_dispatchPressCancel:{enumerable:!1,value:function(a){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this._state=g.CANCELLED,this.dispatchEvent(this._createPressEvent("pressCancel",a))}}}),h=function(){var a,b,c,e,f,g;a=d.create(d,{type:{value:"press"},_event:{enumerable:!1,value:null},event:{get:function(){return this._event},set:function(a){this._event=a}},_touch:{enumerable:!1,value:null},touch:{get:function(){return this._touch},set:function(a){this._touch=a}}}),b=["altKey","ctrlKey","metaKey","shiftKey","cancelBubble","currentTarget","defaultPrevented","eventPhase","timeStamp","preventDefault","stopImmediatePropagation","stopPropagation"],c=["clientX","clientY","pageX","pageY","screenX","screenY","target"],e=function(a){return{get:function(){return this._event[a]}}},f=function(a){return{get:function(){return this._touch?this._touch[a]:this._event[a]}}};for(g=b.length-1;g>=0;g--)d.defineProperty(a,b[g],e(b[g]));for(g=c.length-1;g>=0;g--)d.defineProperty(a,c[g],f(c[g]));return a}()}}),define("4763f06","ui/text-input",{dependencies:["montage","ui/component","ui/native-control"],factory:function(a,b,c){var d=a("montage").Montage,e=a("ui/component").Component,f=a("ui/native-control").NativeControl,g=b.TextInput=d.create(f,{_hasFocus:{enumerable:!1,value:!1},_value:{enumerable:!1,value:null},_valueSyncedWithInputField:{enumerable:!1,value:!1},value:{get:function(){return this._value},set:function(a,b){if(a!==this._value){if(this.converter){var c;try{c=this.converter.revert(a),this.error=null,this._value=c}catch(d){this._value=a,this.error=d}}else this._value=a;b?this._valueSyncedWithInputField=!0:(this._valueSyncedWithInputField=!1,this.needsDraw=!0)}}},_setValue:{value:function(){var a=this.element.value;Object.getPropertyDescriptor(this,"value").set.call(this,a,!0)}},converter:{value:null},_error:{value:null},error:{get:function(){return this._error},set:function(a){this._error=a,this.errorMessage=this._error?this._error.message:null,this.needsDraw=!0}},_errorMessage:{value:null},errorMessage:{get:function(){return this._errorMessage},set:function(a){this._errorMessage=a}},_updateOnInput:{value:!0},updateOnInput:{get:function(){return!!this._updateOnInput},set:function(a){this._updateOnInput=a}},blur:{value:function(){this._element.blur()}},focus:{value:function(){this._element.focus()}},prepareForDraw:{enumerable:!1,value:function(){var a=this.element;a.addEventListener("focus",this),a.addEventListener("input",this),a.addEventListener("change",this),a.addEventListener("blur",this)}},_setElementValue:{value:function(a){this.element.value=a==null?"":a}},draw:{enumerable:!1,value:function(){Object.getPrototypeOf(g).draw.call(this);var a=this.element;this._valueSyncedWithInputField||this._setElementValue(this.converter?this.converter.convert(this._value):this._value),this.error?(a.classList.add("montage-text-invalid"),a.title=this.error.message||""):(a.classList.remove("montage-text-invalid"),a.title="")}},didDraw:{enumerable:!1,value:function(){if(this._hasFocus&&this._value!=null){var a=this._value.toString().length;this.element.setSelectionRange(a,a)}this._valueSyncedWithInputField=!0}},handleInput:{enumerable:!1,value:function(){this.converter?this.converter.allowPartialConversion===!0&&this.updateOnInput===!0&&this._setValue():this._setValue()}},handleChange:{enumerable:!1,value:function(a){this._setValue(),this._hasFocus=!1}},handleBlur:{enumerable:!1,value:function(a){this._hasFocus=!1}},handleFocus:{enumerable:!1,value:function(a){this._hasFocus=!0}}});g.addAttributes({accept:null,alt:null,autocomplete:null,autofocus:{dataType:"boolean"},checked:{dataType:"boolean"},dirname:null,disabled:{dataType:"boolean"},form:null,formaction:null,formenctype:null,formmethod:null,formnovalidate:{dataType:"boolean"},formtarget:null,height:null,list:null,maxlength:null,multiple:{dataType:"boolean"},name:null,pattern:null,placeholder:null,readonly:{dataType:"boolean"},required:{dataType:"boolean"},size:null,src:null,width:null})}}),define("1156f40","ui/main.reel/main",{dependencies:["montage","montage/ui/component","montage/ui/controller/array-controller","core/todo","montage/core/serializer","montage/core/deserializer"],factory:function(a,b,c){var d=a("montage").Montage,e=a("montage/ui/component").Component,f=a("montage/ui/controller/array-controller").ArrayController,g=a("core/todo").Todo,h=a("montage/core/serializer").Serializer,i=a("montage/core/deserializer").Deserializer,j="todos-montage";b.Main=d.create(e,{newTodoForm:{value:null},newTodoInput:{value:null},todoListController:{serializable:!1,value:null},didCreate:{value:function(){this.todoListController=f.create(),this.load()}},load:{value:function(){if(localStorage){var b=localStorage.getItem(j);if(b){var c=i.create(),d=this;try{c.initWithStringAndRequire(b,a).deserializeObject(function(a){d.todoListController.initWithContent(a)},a)}catch(e){console.error("Could not load saved tasks."),console.debug("Could not deserialize",b),console.log(e.stack)}}}}},save:{value:function(){if(localStorage){var b=this.todoListController.content,c=h.create().initWithRequire(a);localStorage.setItem(j,c.serializeObject(b))}}},prepareForDraw:{value:function(){this.newTodoForm.identifier="newTodoForm",this.newTodoForm.addEventListener("submit",this,!1),this.addEventListener("destroyTodo",this,!0),window.addEventListener("beforeunload",this,!0)}},captureDestroyTodo:{value:function(a){this.destroyTodo(a.detail.todo)}},handleNewTodoFormSubmit:{value:function(a){a.preventDefault();var b=this.newTodoInput.value.trim();if(""===b)return;this.createTodo(b),this.newTodoInput.value=null}},createTodo:{value:function(a){var b=g.create().initWithTitle(a);return this.todoListController.addObjects(b),b}},destroyTodo:{value:function(a){return this.todoListController.removeObjects(a),a}},allCompleted:{dependencies:["todoListController.organizedObjects.completed"],get:function(){return this.todoListController.organizedObjects.getProperty("completed").all()},set:function(a){this.todoListController.organizedObjects.forEach(function(b){b.completed=a})}},todosLeft:{dependencies:["todoListController.organizedObjects.completed"],get:function(){if(this.todoListController.organizedObjects){var a=this.todoListController.organizedObjects;return a.filter(function(a){return!a.completed})}}},completedTodos:{dependencies:["todoListController.organizedObjects.completed"],get:function(){if(this.todoListController.organizedObjects){var a=this.todoListController.organizedObjects;return a.filter(function(a){return a.completed})}}},handleClearCompletedButtonAction:{value:function(a){var b=this.todoListController.organizedObjects.filter(function(a){return a.completed});b.length>0&&this.todoListController.removeObjects.apply(this.todoListController,b)}},captureBeforeunload:{value:function(){this.save()}}})}}),define("4763f06","ui/composer/composer",{dependencies:["montage"],factory:function(a,b,c){var d=a("montage").Montage;b.Composer=d.create(d,{_component:{value:null},component:{get:function(){return this._component},set:function(a){this._component=a}},_element:{value:null},element:{get:function(){return this._element},set:function(a){this._element=a}},lazyLoad:{value:!1},_needsFrame:{value:!1},needsFrame:{set:function(a){this._needsFrame!==a&&(this._needsFrame=a,this._component&&a&&this._component.scheduleComposer(this))},get:function(){return this._needsFrame}},frame:{value:function(a){}},_resolveDefaults:{value:function(){this.element==null&&this.component!=null&&(this.element=this.component.element)}},_load:{value:function(){this.element||this._resolveDefaults(),this.load()}},load:{value:function(){}},unload:{value:function(){}},deserializedFromTemplate:{value:function(){this.component&&this.component.addComposer(this)}}})}}),define("4763f06","core/converter/converter",{dependencies:["montage"],factory:function(a,b,c){var d=a("montage").Montage,e="[object Function]",f="[object Boolean]",g="[object Number]",h="[object String]",i="[object Array]",j="[object Date]",k=Object.prototype.toString,l=function(a){return k.call(a)===g};b.isNumber=l;var m=function(a){return a&&typeof a!="undefined"};b.isDef=m;var n=b.Validator=d.create(d,{validate:{value:null}}),o=b.Converter=d.create(d,{allowPartialConversion:{value:!0},convert:{enumerable:!1,value:null},revert:{enumerable:!1,value:null}})}}),define("1156f40","ui/main.reel/item-count-converter",{dependencies:["montage","montage/core/converter/converter"],factory:function(a,b,c){var d=a("montage").Montage,e=a("montage/core/converter/converter").Converter;b.ItemCountConverter=d.create(e,{convert:{value:function(a){return 1===a?"item":"items"}}})}})
bundleLoaded("bundle-1-0-ff282ac.js")